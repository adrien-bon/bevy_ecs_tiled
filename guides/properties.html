<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using Tiled custom properties - bevy_ecs_tiled Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">bevy_ecs_tiled Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="using-tiled-custom-properties"><a class="header" href="#using-tiled-custom-properties">Using Tiled Custom Properties</a></h1>
<p>Tiled allows you to add "custom properties" to various items such as layers, tiles, objects, or maps.</p>
<p>These custom properties can be:</p>
<ul>
<li><strong>Standard types:</strong> string, integer, float, color, etc.</li>
<li><strong>Custom types:</strong> your own structures with sub-properties (which can themselves be standard or custom types)</li>
</ul>
<p>With <code>bevy_ecs_tiled</code>, you can load these custom properties into your game and access them as regular Bevy <code>Component</code> or <code>Resource</code>.<br />
This means you can define game logic directly in the Tiled editor and use it seamlessly in your Bevy game.</p>
<p>For example, you could:</p>
<ul>
<li>Associate a "movement cost" with a tile type</li>
<li>Create an object representing your player or an enemy</li>
<li>Add a generic "trigger zone" (e.g., damaging zone, victory zone)</li>
<li>...or anything else your game needs!</li>
</ul>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The user properties mechanism relies on Bevy's reflection system.</p>
<p>To use custom properties from Tiled in your game, you need to:</p>
<ol>
<li><strong>Enable the <code>user_properties</code> feature</strong> in your local <code>Cargo.toml</code> file.</li>
<li><strong>Declare your custom types</strong> in Rust and make them reflectable.</li>
<li><strong>Run your game once</strong> to export these types as a <code>.json</code> file, readable by Tiled.</li>
<li><strong>Import this <code>.json</code> file</strong> into the Tiled editor to make your types available as custom properties.</li>
</ol>
<p>Once this is done, you can use your types directly in Tiled. When you load your map, the corresponding <code>Component</code> or <code>Resource</code> will be automatically inserted into your Bevy world.</p>
<p>For a quick demonstration, see the <a href="https://github.com/adrien-bon/bevy_ecs_tiled/blob/main/examples/properties_basic.rs">dedicated example</a>.</p>
<hr />
<h2 id="enabling-the-feature"><a class="header" href="#enabling-the-feature">Enabling the feature</a></h2>
<p>Update your local <code>Cargo.toml</code> file to enable the <code>user_properties</code> feature:</p>
<pre><code class="language-toml">[dependencies]
bevy = "0.16"
bevy_ecs_tiled = { version = "0.9", features = ["user_properties"] }
</code></pre>
<blockquote>
<p><strong>Note:</strong><br />
You may need to adjust <code>bevy</code> and <code>bevy_ecs_tiled</code> versions.</p>
</blockquote>
<hr />
<h2 id="declaring-types-for-custom-properties"><a class="header" href="#declaring-types-for-custom-properties">Declaring Types for Custom Properties</a></h2>
<p>Each Tiled map, layer, tile, or object is represented by a Bevy <code>Entity</code>.<br />
If you want to add custom properties to them, these properties should be a <code>Component</code>.</p>
<p>To make your custom types usable in Tiled, they must be "reflectable":</p>
<ul>
<li>Derive the <code>Reflect</code> trait for your type.</li>
<li>Register your type with Bevy.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="playground"><code class="language-rust no_run">use bevy::prelude::*;

// Declare a component and make it reflectable
#[derive(Component, Reflect, Default)]
#[reflect(Component, Default)]
struct BiomeInfos {
    block_line_of_sight: bool,
    ty: BiomeType,
}

// Any sub-type must also be reflectable, but does not need to be a Component
#[derive(Default, Reflect)]
#[reflect(Default)]
enum BiomeType {
    #[default]
    Unknown,
    Forest,
    Plain,
    Mountain,
    Desert,
}

// Register your top-level struct in the Bevy registry
fn main() {
    App::new()
        .register_type::&lt;BiomeInfos&gt;();
}</code></pre></pre>
<p><strong>Tip:</strong><br />
Deriving <code>Default</code> is useful: you don't have to fill all fields in Tiled; missing fields will use the type's default value.</p>
<hr />
<h2 id="importing-custom-properties-into-tiled"><a class="header" href="#importing-custom-properties-into-tiled">Importing Custom Properties into Tiled</a></h2>
<p>Before you can add custom properties in Tiled, you need to export them from your app and import them into Tiled.</p>
<p>When running with the <code>user_properties</code> feature, your app will automatically produce a <code>.json</code> export of all types registered with Bevy.<br />
By default, this file is named <code>tiled_types_export.json</code> and is created in your workspace root.<br />
You can change the filename or disable export via <a href="https://docs.rs/bevy_ecs_tiled/latest/bevy_ecs_tiled/tiled/struct.TiledPluginConfig.html"><code>TiledPluginConfig</code></a>.</p>
<p>To import this file in Tiled:</p>
<ol>
<li>In Tiled, go to <strong>View → Custom Types Editor</strong><br />
<img src="images/properties_view-types.png" alt="view-custom-types" /></li>
<li>Click the <strong>Import</strong> button and select your <code>.json</code> file<br />
<img src="images/properties_import-types.png" alt="import-custom-types" /></li>
<li>You will now see all custom types imported from your application<br />
<img src="images/properties_custom-type.png" alt="view-custom-types" /></li>
</ol>
<hr />
<h2 id="adding-custom-properties-in-tiled"><a class="header" href="#adding-custom-properties-in-tiled">Adding Custom Properties in Tiled</a></h2>
<p>Once imported, you can add custom properties to your map:</p>
<ol>
<li>Select the element (map, layer, object, etc.) you want to add a property to.</li>
<li>In the "Custom Properties" panel, right-click and select <strong>Add Property</strong><br />
<img src="images/properties_add-property.png" alt="add-property" /></li>
<li>Choose the type you want to add and give it a name.</li>
<li>For example, add the <code>BiomeInfos</code> type from the earlier example:<br />
<img src="images/properties_biome-infos.png" alt="biome-infos" /></li>
<li>Set the values as needed for this element.</li>
</ol>
<p>When you load the map, the corresponding Bevy entity will have the appropriate <code>Component</code> with the values you set.</p>
<blockquote>
<p><strong>Note:</strong><br />
Only add properties imported from Bevy. Properties created only in Tiled (ie. not exported from your app) will not be loaded in Bevy.
You can also control which properties are exported from Bevy via <a href="https://docs.rs/bevy_ecs_tiled/latest/bevy_ecs_tiled/tiled/struct.TiledPluginConfig.html"><code>TiledPluginConfig</code></a></p>
</blockquote>
<hr />
<h2 id="special-considerations"><a class="header" href="#special-considerations">Special Considerations</a></h2>
<ul>
<li>You can add custom properties to objects, layers, or the map itself.<br />
To add properties to tiles, edit the tileset directly.<br />
We currently do not support adding properties to the tileset itself.</li>
<li>For more on adding custom properties, see the <a href="https://doc.mapeditor.org/en/stable/manual/custom-properties/">official Tiled documentation</a>.</li>
<li>You can also add <code>Resource</code>s to your map.<br />
Since resources are global and not attached to a specific entity, they are only supported as map-level properties.<br />
If you add a resource to another Tiled element, it will be ignored.</li>
</ul>
<hr />
<p>With this workflow, you can design your game data visually in Tiled and have it automatically reflected in your Bevy game.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guides/physics.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../guides/debug.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guides/physics.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../guides/debug.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
